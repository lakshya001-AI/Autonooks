<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Driver Registration</title>
    <link rel="stylesheet" href="Registration.css" type="text/css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@100..900&family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap" rel="stylesheet">
</head>
<body>
    <div class="confirm" id="confirm">
        <h1>This Form is only for Drivers</h1>
        <p id="p1">यह फ़ॉर्म केवल ड्राइवर्स के लिए है।</p>
        <p id="p2">Click button to Proceed</p>
        <button id="Proceedbtn" onclick="openRegistrationForm()">Continue</button>
    </div>

    <div class="registration" id="registration">
        <h1>Driver Registration Form</h1>
        <p id="name">Full Name*</p>
        <input type="text" placeholder="Enter your full name" id="Name" required>
        <p id="name">Mobile No*</p>
        <input type="tel" placeholder="9090909090" id="mobileNo" required>
        <p id="name">Email Id*</p>
        <input type="email" placeholder="XYZ@gmail.com" id="emailid" required>
        <p id="name">Address*</p>
        <input type="text" placeholder="Enter Your Address" id="address" required>
        <div class="csp">
            <input type="text" placeholder="City" id="city" required>
            <input type="text" placeholder="State" id="state" required>
            <input type="text" placeholder="Pincode(460002)" id="postalcode" required>
        </div>
        <p id="name">License No*</p>
        <input type="text" placeholder="MP04 20211000890" id="licenseNo" required>

        <p id="name">Driving Route*</p>
        <div class="route">
            <p id="name">From*</p>
            <!-- <input type="date" id="drop-off"> -->
            <select id="selected-city-from">
                <option value="bhopal">Bhopal</option>
                <option value="indore">Indore</option>
                <option value="betul">Betul</option>
                <option value="nagpur">Nagpur</option>
                <option value="ujjain">Ujjain</option>
                <option value="sehore">Sehore</option>
                <option value="dewas">Dewas</option>
                <option value="jabalpur">Jabalpur</option>
            </select>
            
            <p id="name">To*</p>
            <!-- <input type="date" id="drop-off"> -->
            <select id="selected-city-to">
                <option value="bhopal">Bhopal</option>
                <option value="indore">Indore</option>
                <option value="betul">Betul</option>
                <option value="nagpur">Nagpur</option>
                <option value="ujjain">Ujjain</option>
                <option value="sehore">Sehore</option>
                <option value="dewas">Dewas</option>
                <option value="jabalpur">Jabalpur</option>
            </select>
            
        </div>

        <p id="name">Car*</p>
        <select id="carsdropdown">
            <option value="swift">Maruti Swift</option>
            <option value="grandi10">Grand i10</option>
            <option value="ertiga">Maruti Ertiga</option>
            <option value="scorpio">Mahindra Scorpio</option>
            <option value="innova">Toyota Innova</option>
            <option value="ecosport">Ford Ecosport</option>
            <option value="seltos">Kia Seltos</option>
        </select>

        <button type="button" id="submitform">Submit</button>
    </div>
    
    <script type="module">

        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.2/firebase-app.js";
        import { getDatabase, ref, set, get, child} from "https://www.gstatic.com/firebasejs/10.7.2/firebase-database.js";

        const firebaseConfig = {
            apiKey: "AIzaSyAQ5fHDWYQQ2at861CokqD0N-J0o-GsWJs",
            authDomain: "autonook-bookcar.firebaseapp.com",
            projectId: "autonook-bookcar",
            storageBucket: "autonook-bookcar.appspot.com",
            messagingSenderId: "1083118580925",
            appId: "1:1083118580925:web:5c34f7d9338a4bacf773d4"
        };

        const app = initializeApp(firebaseConfig);
    
        const db = getDatabase(app);

        document.getElementById("submitform").addEventListener("click", function(e){

            e.preventDefault();

            const DriverName = document.getElementById("Name").value;
            const mobileNo = document.getElementById("mobileNo").value;
            const emailId = document.getElementById("emailid").value;
            const address = document.getElementById("address").value;
            const city = document.getElementById("city").value;
            const state = document.getElementById("state").value;
            const pincode = document.getElementById("postalcode").value;
            const licenseNo = document.getElementById("licenseNo").value;
            const from = document.getElementById("selected-city-from").value;
            const to = document.getElementById("selected-city-to").value;
            const car = document.getElementById("carsdropdown").value;

            var pattern = /^[6-9]\d{9}$/;

            if(DriverName && pattern.test(mobileNo) && emailId && address && city && state && pincode && licenseNo && from && to && car){

                set(ref(db, 'DriverInfo/' + DriverName), {
                    DriverName: DriverName,
                    mobileNo: mobileNo,
                    emailId: emailId,
                    address: address,
                    city: city,
                    state: state,
                    pincode: pincode,
                    licenseNo: licenseNo,
                    From: from,
                    To: to,
                    car: car

                });

                alert("Thanks for Registration!, Registration Successful");
                document.getElementById("Name").value = "";
                document.getElementById("mobileNo").value = "";
                document.getElementById("emailid").value = "";
                document.getElementById("address").value = "";
                document.getElementById("city").value = "";
                document.getElementById("state").value = "";
                document.getElementById("postalcode").value = "";
                document.getElementById("licenseNo").value = "";
                document.getElementById("selected-city-from").value = "";
                document.getElementById("selected-city-to").value = "";
            }else{
                alert("Please fill all the details, or Check Your mobile Number");
            }
    });



    </script>

    <script src="Registration.js" type="text/javascript"></script>
</body>
</html>